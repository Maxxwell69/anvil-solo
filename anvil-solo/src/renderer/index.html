<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'">
  <title>Anvil Solo - Solana Trading Bot</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Unlock Screen (shown first) -->
  <div id="unlock-screen" class="screen active">
    <div class="unlock-container">
      <h1>ğŸ”’ Anvil Solo</h1>
      <p class="version-splash">v3.4.3</p>
      <p>Unlock your wallet to continue</p>
      <div class="form-group">
        <div class="password-input-wrapper">
          <input type="password" id="unlock-password" placeholder="Enter master password" />
          <button type="button" class="password-toggle" id="unlock-password-toggle" aria-label="Toggle password visibility">
            <span class="password-toggle-icon">ğŸ‘ï¸</span>
          </button>
        </div>
        <button id="unlock-btn" class="btn btn-primary">Unlock Wallet</button>
      </div>
      <div id="unlock-error" class="error-message"></div>
    </div>
  </div>

  <!-- Generate Wallet Modal -->
  <div id="generate-modal" class="modal">
    <div class="modal-content">
      <h2>ğŸ”‘ Generate New Wallet</h2>
      <div class="form-group">
        <label>Master Password (min 8 characters)</label>
        <div class="password-input-wrapper">
          <input type="password" id="gen-password" placeholder="Enter password" />
          <button type="button" class="password-toggle" id="gen-password-toggle">
            <span class="password-toggle-icon">ğŸ‘ï¸</span>
          </button>
        </div>
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <div class="password-input-wrapper">
          <input type="password" id="gen-confirm-password" placeholder="Confirm password" />
          <button type="button" class="password-toggle" id="gen-confirm-toggle">
            <span class="password-toggle-icon">ğŸ‘ï¸</span>
          </button>
        </div>
      </div>
      <div class="form-actions">
        <button id="gen-create-btn" class="btn btn-primary">Create Wallet</button>
        <button id="gen-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
      <div id="gen-error" class="error-message"></div>
    </div>
  </div>

  <!-- Import Wallet Modal -->
  <div id="import-modal" class="modal">
    <div class="modal-content">
      <h2>ğŸ“¥ Import Wallet</h2>
      <div class="form-group">
        <label>Private Key</label>
        <textarea id="import-private-key" placeholder="Paste your private key (Base58, JSON, or Base64)" rows="3"></textarea>
        <small>Supported formats: Base58, JSON array, or Base64</small>
      </div>
      <div class="form-group">
        <label>Master Password (min 8 characters)</label>
        <div class="password-input-wrapper">
          <input type="password" id="import-password" placeholder="Enter password" />
          <button type="button" class="password-toggle" id="import-password-toggle">
            <span class="password-toggle-icon">ğŸ‘ï¸</span>
          </button>
        </div>
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <div class="password-input-wrapper">
          <input type="password" id="import-confirm-password" placeholder="Confirm password" />
          <button type="button" class="password-toggle" id="import-confirm-toggle">
            <span class="password-toggle-icon">ğŸ‘ï¸</span>
          </button>
        </div>
      </div>
      <div class="form-actions">
        <button id="import-create-btn" class="btn btn-primary">Import Wallet</button>
        <button id="import-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
      <div id="import-error" class="error-message"></div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="success-modal" class="modal">
    <div class="modal-content">
      <h2>âœ… Success!</h2>
      <div id="success-message" class="success-text"></div>
      <div class="form-actions">
        <button id="success-ok-btn" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>

  <!-- Archive Strategy Modal -->
  <div id="archive-modal" class="modal">
    <div class="modal-content">
      <h2>ğŸ“¦ Archive Strategy</h2>
      <div style="background: #34495e; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <p style="margin: 0 0 10px 0; color: #bdc3c7;">Archiving this strategy will:</p>
        <ul style="margin: 0; padding-left: 20px; color: #bdc3c7; font-size: 14px;">
          <li>âœ… Preserve all transaction data</li>
          <li>âœ… Keep activity logs</li>
          <li>âœ… Store locally on your computer</li>
          <li>â˜ï¸ Allow cloud sync later</li>
          <li>â™»ï¸ Let you restore it anytime</li>
        </ul>
      </div>
      <div class="form-group">
        <label>Optional Notes</label>
        <textarea id="archive-notes" placeholder="e.g., 'Completed successfully', 'Testing phase done', etc." rows="3"></textarea>
        <small>Add notes about why you're archiving this strategy (optional)</small>
      </div>
      <div class="form-actions">
        <button id="archive-confirm-btn" class="btn btn-primary">ğŸ“¦ Archive Strategy</button>
        <button id="archive-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
      <div id="archive-error" class="error-message"></div>
    </div>
  </div>

  <!-- Main App (shown after unlock) -->
  <div id="main-app" class="screen">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <h2>âš¡ Anvil Solo</h2>
        <span class="version-badge" id="app-version">v3.4.3</span>
      </div>
      <nav class="nav">
        <a href="#" class="nav-item active" data-page="dashboard">
          <span>ğŸ“Š</span> Dashboard
        </a>
        <a href="#" class="nav-item" data-page="tokens">
          <span>ğŸª™</span> Token Manager
        </a>
        <a href="#" class="nav-item" data-page="dca">
          <span>ğŸ“ˆ</span> DCA Strategy
        </a>
        <a href="#" class="nav-item" data-page="ratio">
          <span>ğŸ¯</span> Ratio Trading
        </a>
        <a href="#" class="nav-item" data-page="bundle">
          <span>ğŸ“¦</span> Bundle Trading
        </a>
        <a href="#" class="nav-item" data-page="trades">
          <span>ğŸ“Š</span> Trades & Volume
        </a>
        <a href="#" class="nav-item" data-page="archive">
          <span>ğŸ“¦</span> Archive
        </a>
        <a href="#" class="nav-item" data-page="wallet">
          <span>ğŸ’°</span> Wallet
        </a>
        <a href="#" class="nav-item" data-page="monitor">
          <span>ğŸ“Š</span> Monitor
        </a>
        <a href="#" class="nav-item" data-page="diagnostics">
          <span>ğŸ”§</span> Diagnostics
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <span>âš™ï¸</span> Settings
        </a>
      </nav>
      <div class="sidebar-footer">
        <button id="lock-wallet-btn" class="btn btn-small">ğŸ”’ Lock Wallet</button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Dashboard Page -->
      <div id="dashboard-page" class="page active">
        <h1>Dashboard</h1>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">SOL Balance</div>
            <div class="stat-value" id="sol-balance">0.00</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Active Strategies</div>
            <div class="stat-value" id="active-strategies">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Today's Volume</div>
            <div class="stat-value" id="today-volume">0 SOL</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Total Trades</div>
            <div class="stat-value" id="total-trades">0</div>
          </div>
        </div>

        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2 style="margin: 0;">Active Strategies</h2>
            <button id="refresh-strategies-btn" class="btn btn-small" style="background: #3498db;">
              ğŸ”„ Refresh
            </button>
          </div>
          <div id="strategies-list" class="strategies-list">
            <div class="empty-state">No active strategies. Create one to get started!</div>
          </div>
        </div>
      </div>

      <!-- Token Manager Page -->
      <div id="tokens-page" class="page">
        <h1>Token Manager</h1>
        <p class="page-description">Manage your token list with names and contract addresses for easy trading</p>

        <div class="section">
          <h2>Add New Token</h2>
          <div class="form-row">
            <div class="form-group">
              <label>Token Name</label>
              <input type="text" id="token-name" placeholder="e.g., Bonk" />
            </div>
            <div class="form-group">
              <label>Symbol (Optional)</label>
              <input type="text" id="token-symbol" placeholder="e.g., BONK" />
            </div>
          </div>
          <div class="form-group">
            <label>Contract Address (CA)</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="token-address" placeholder="Enter Solana token mint address" style="flex: 1;" />
              <button id="fetch-token-info-btn" class="btn btn-secondary" style="min-width: 150px;">ğŸ” Fetch Token Info</button>
            </div>
            <small>Paste token address and click "Fetch Token Info" to auto-fill details from Jupiter</small>
          </div>
          <div class="form-group">
            <label>Notes (Optional)</label>
            <textarea id="token-notes" placeholder="Add notes about this token..." rows="2"></textarea>
          </div>
          <div class="form-actions">
            <button id="add-token-btn" class="btn btn-primary">Add Token</button>
            <button id="clear-token-form-btn" class="btn btn-secondary">Clear Form</button>
          </div>
          <div id="token-status" class="status-message"></div>
        </div>

        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2 style="margin: 0;">My Tokens</h2>
            <button id="browse-jupiter-tokens-btn" class="btn btn-small" style="background: #9b59b6;">
              ğŸŒ Browse Jupiter Tokens
            </button>
          </div>
          <div id="tokens-list" class="tokens-list">
            <div class="empty-state">No tokens added yet. Add your first token above!</div>
          </div>
        </div>
        
        <div class="section" id="jupiter-tokens-browser" style="display: none;">
          <h2>Jupiter Verified Tokens</h2>
          <p class="page-description">Browse and add tokens from Jupiter's verified list</p>
          <div class="form-group">
            <input type="text" id="jupiter-token-search" placeholder="Search tokens..." style="margin-bottom: 10px;" />
          </div>
          <div id="jupiter-tokens-list" style="max-height: 400px; overflow-y: auto; background: #2c3e50; padding: 10px; border-radius: 8px;">
            <div class="empty-state">Loading Jupiter tokens...</div>
          </div>
          <div style="margin-top: 10px;">
            <button id="close-jupiter-browser-btn" class="btn btn-secondary">Close</button>
          </div>
        </div>
      </div>

      <!-- DCA Strategy Page -->
      <div id="dca-page" class="page">
        <h1>DCA (Dollar Cost Averaging)</h1>
        <p class="page-description">Buy or sell tokens on a schedule to average out price fluctuations.</p>

        <div class="form-container">
          <div class="form-group">
            <label>Select Token (Optional)</label>
            <select id="dca-token-select">
              <option value="">-- Select from your tokens or enter below --</option>
            </select>
          </div>
          <div class="form-group">
            <label>Or Enter Token Address</label>
            <input type="text" id="dca-token" placeholder="Enter Solana token mint address" />
            <small>Example: DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263 (BONK)</small>
          </div>

          <div class="form-group">
            <label>ğŸ’° Select Wallet</label>
            <select id="dca-wallet-select">
              <option value="">-- Select wallet --</option>
            </select>
            <small>Choose which wallet will execute this strategy</small>
          </div>

          <div class="form-group">
            <label>Direction</label>
            <select id="dca-direction">
              <option value="buy">Buy (SOL â†’ Token)</option>
              <option value="sell">Sell (Token â†’ SOL)</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label id="dca-amount-label">Total Amount (SOL)</label>
              <input type="number" id="dca-amount" placeholder="10" step="0.01" value="" />
              <small id="dca-amount-hint">Total SOL to spend buying tokens</small>
            </div>

            <div class="form-group">
              <label>Number of Orders</label>
              <input type="number" id="dca-orders" placeholder="24" value="" />
              <small>Split into N orders</small>
            </div>
          </div>

          <div class="form-group">
            <label>Frequency</label>
            <select id="dca-frequency">
              <option value="hourly">Every Hour</option>
              <option value="2h">Every 2 Hours</option>
              <option value="4h">Every 4 Hours</option>
              <option value="6h">Every 6 Hours</option>
              <option value="daily">Daily</option>
              <option value="custom">Custom Interval</option>
            </select>
          </div>

          <div class="form-group" id="dca-custom-interval" style="display: none;">
            <label>Custom Interval (minutes)</label>
            <input type="number" id="dca-interval-minutes" placeholder="30" value="" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Slippage (%)</label>
              <input type="number" id="dca-slippage" placeholder="1" step="0.1" value="1" />
            </div>

            <div class="form-group">
              <label>Priority Fee</label>
              <select id="dca-priority-fee">
                <option value="10000">Low (10,000 lamports / 0.00001 SOL / ~$0.002)</option>
                <option value="100000" selected>Medium (100,000 lamports / 0.0001 SOL / ~$0.02)</option>
                <option value="500000">High (500,000 lamports / 0.0005 SOL / ~$0.10)</option>
              </select>
              <small>Higher fees = faster confirmation during network congestion</small>
            </div>
          </div>

          <div class="form-actions">
            <button id="create-dca-btn" class="btn btn-primary">Create DCA Strategy</button>
            <button class="btn btn-secondary" onclick="showPage('dashboard')">Cancel</button>
          </div>

          <div id="dca-status" class="status-message"></div>
        </div>
      </div>

      <!-- Ratio Trading Page -->
      <div id="ratio-page" class="page">
        <h1>ğŸ¯ Ratio Trading</h1>
        <p class="page-description">Simple buy/sell ratio pattern - creates volume while cycling position.</p>

        <div class="form-container">
          <!-- Info Box -->
          <div style="background: #34495e; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-top: 0; color: #3498db;">ğŸ“– How It Works:</h3>
            <div style="font-size: 13px; color: #bdc3c7; line-height: 1.6;">
              <p><strong>1.</strong> First buy sets the token amount (e.g., 0.1 SOL â†’ 100,000 tokens)</p>
              <p><strong>2.</strong> All future trades use that same token amount (100,000)</p>
              <p><strong>3.</strong> Pattern: 3 buys â†’ 2 sells â†’ repeat (maintains position)</p>
              <p><strong>4.</strong> Continues until total SOL limit reached</p>
            </div>
          </div>

          <div class="form-group">
            <label>Select Token (Optional)</label>
            <select id="ratio-token-select">
              <option value="">-- Select from your tokens or enter below --</option>
            </select>
          </div>
          <div class="form-group">
            <label>Or Enter Token Address</label>
            <input type="text" id="ratio-token" placeholder="Enter Solana token mint address" />
            <small>Example: DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263 (BONK)</small>
          </div>

          <div class="form-group">
            <label>ğŸ’° Select Wallet</label>
            <select id="ratio-wallet-select">
              <option value="">-- Select wallet --</option>
            </select>
            <small>Choose which wallet will execute this strategy</small>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Number of Buys</label>
              <input type="number" id="ratio-buy-count" placeholder="3" min="1" value="3" />
              <small>How many buys per cycle</small>
            </div>

            <div class="form-group">
              <label>Number of Sells</label>
              <input type="number" id="ratio-sell-count" placeholder="2" min="1" value="2" />
              <small>How many sells per cycle</small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Initial SOL Per Trade</label>
              <input type="number" id="ratio-initial-sol" placeholder="0.1" step="0.01" value="0.1" />
              <small>SOL amount for first buy (sets token amount)</small>
            </div>

            <div class="form-group">
              <label>Total SOL Limit</label>
              <input type="number" id="ratio-total-sol" placeholder="10" step="0.1" value="10" />
              <small>Stop when total SOL used reaches this</small>
            </div>
          </div>

          <div class="form-group">
            <label>Interval Between Trades (minutes)</label>
            <input type="number" id="ratio-interval" placeholder="5" min="1" value="5" />
            <small>Minutes to wait between each trade</small>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Slippage (%)</label>
              <input type="number" id="ratio-slippage" placeholder="1" step="0.1" value="1" />
              <small>Max acceptable slippage</small>
            </div>

            <div class="form-group">
              <label>Priority Fee</label>
              <select id="ratio-priority-fee">
                <option value="10000">Low (10,000 lamports / 0.00001 SOL / ~$0.002)</option>
                <option value="100000" selected>Medium (100,000 lamports / 0.0001 SOL / ~$0.02)</option>
                <option value="500000">High (500,000 lamports / 0.0005 SOL / ~$0.10)</option>
              </select>
              <small>Higher fees = faster confirmation</small>
            </div>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="ratio-randomize" checked />
              Randomize timing (Â±20% to look organic)
            </label>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="ratio-multi-wallet" checked />
              Use multiple wallets (rotate through derived wallets)
            </label>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="ratio-round-trip" />
              ğŸ”€ Round-Trip Mode (Reverses buy/sell pattern after each cycle)
            </label>
            <small style="color: #8892a6; margin-left: 25px; display: block; margin-top: 5px;">
              Example: Buy 3, Sell 2 â†’ Then Sell 3, Buy 2 â†’ Buy 3, Sell 2 â†’ Repeats until SOL limit
            </small>
          </div>

          <div class="form-actions">
            <button id="create-ratio-btn" class="btn btn-primary">Create Ratio Strategy</button>
            <button class="btn btn-secondary" onclick="showPage('dashboard')">Cancel</button>
          </div>

          <div id="ratio-status" class="status-message"></div>
        </div>
      </div>

      <!-- Bundle Trading Page -->
      <div id="bundle-page" class="page">
        <h1>ğŸ“¦ Bundle Reconcile Trading</h1>
        <p class="page-description">Execute bundles of trades that reconcile - buys balanced by sells for neutral position.</p>

        <div class="form-container">
          <!-- Info Box -->
          <div style="background: #34495e; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-top: 0; color: #3498db;">ğŸ“– How It Works:</h3>
            <div style="font-size: 13px; color: #bdc3c7; line-height: 1.6;">
              <p><strong>Instant Bundle:</strong> Multiple buys â†’ 1 reconciling sell (all within seconds)</p>
              <p><strong>Delayed Bundle:</strong> Same pattern but with delays between trades (looks organic)</p>
              <p><strong>Example:</strong> Buy 0.05 + Buy 0.10 â†’ Sell 150k tokens â‰ˆ 0.15 SOL back</p>
              <p><strong>Result:</strong> Volume created, position stays neutral âš–ï¸</p>
            </div>
          </div>

          <div class="form-group">
            <label>Select Token (Optional)</label>
            <select id="bundle-token-select">
              <option value="">-- Select from your tokens or enter below --</option>
            </select>
          </div>
          <div class="form-group">
            <label>Or Enter Token Address</label>
            <input type="text" id="bundle-token" placeholder="Enter Solana token mint address" />
            <small>Example: DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263 (BONK)</small>
          </div>

          <div class="form-group">
            <label>ğŸ’° Select Wallet</label>
            <select id="bundle-wallet-select">
              <option value="">-- Select wallet --</option>
            </select>
            <small>Choose which wallet will execute this strategy</small>
          </div>

          <div class="form-group">
            <label>Bundle Type</label>
            <div style="display: flex; gap: 20px; padding: 10px; background: #2c3e50; border-radius: 4px;">
              <label class="checkbox-label" style="margin: 0;">
                <input type="radio" name="bundle-type" id="bundle-type-instant" value="instant" checked />
                âš¡ Instant (all trades at once)
              </label>
              <label class="checkbox-label" style="margin: 0;">
                <input type="radio" name="bundle-type" id="bundle-type-delayed" value="delayed" />
                â±ï¸ Delayed (trades with time spacing)
              </label>
            </div>
            <small>Instant = maximum speed, Delayed = more organic appearance</small>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Buys Per Bundle</label>
              <input type="number" id="bundle-buys-count" placeholder="3" min="2" max="5" value="3" />
              <small>Number of buys before reconcile (2-5)</small>
            </div>

            <div class="form-group">
              <label>Total Bundles</label>
              <input type="number" id="bundle-total-count" placeholder="20" min="1" value="20" />
              <small>How many bundles to execute</small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Min Buy Amount (SOL)</label>
              <input type="number" id="bundle-min-buy" placeholder="0.05" step="0.01" value="0.05" />
              <small>Minimum SOL per buy</small>
            </div>

            <div class="form-group">
              <label>Max Buy Amount (SOL)</label>
              <input type="number" id="bundle-max-buy" placeholder="0.15" step="0.01" value="0.15" />
              <small>Maximum SOL per buy</small>
            </div>
          </div>

          <div class="form-group">
            <label>Bundle Interval (minutes)</label>
            <input type="number" id="bundle-interval" placeholder="30" min="1" value="30" />
            <small>Minutes to wait between bundles</small>
          </div>

          <div class="form-group" id="bundle-delay-field" style="display: none;">
            <label>â±ï¸ Delay Between Trades (seconds)</label>
            <input type="number" id="bundle-trade-delay" placeholder="10" min="1" max="60" value="10" />
            <small>For delayed bundles: seconds between each trade</small>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Slippage (%)</label>
              <input type="number" id="bundle-slippage" placeholder="1" step="0.1" value="1" />
              <small>Max acceptable slippage</small>
            </div>

            <div class="form-group">
              <label>Priority Fee</label>
              <select id="bundle-priority-fee">
                <option value="10000">Low (10,000 lamports / 0.00001 SOL / ~$0.002)</option>
                <option value="100000" selected>Medium (100,000 lamports / 0.0001 SOL / ~$0.02)</option>
                <option value="500000">High (500,000 lamports / 0.0005 SOL / ~$0.10)</option>
              </select>
              <small>Higher fees = faster confirmation</small>
            </div>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="bundle-multi-wallet" checked />
              Use multiple wallets (rotate through derived wallets)
            </label>
          </div>

          <div class="form-actions">
            <button id="create-bundle-btn" class="btn btn-primary">Create Bundle Strategy</button>
            <button class="btn btn-secondary" onclick="showPage('dashboard')">Cancel</button>
          </div>

          <div id="bundle-status" class="status-message"></div>
        </div>
      </div>

      <!-- Trades & Volume Page -->
      <div id="trades-page" class="page">
        <h1>ğŸ“Š Trades & Volume Statistics</h1>
        <p class="page-description">Track your trading activity, volume generation, and performance metrics</p>

        <!-- Summary Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Trades</div>
            <div class="stat-value" id="total-trades-count">0</div>
            <div style="font-size: 11px; color: #7f8c8d; margin-top: 5px;">All time</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Total Volume</div>
            <div class="stat-value" id="total-volume-sol">0 SOL</div>
            <div style="font-size: 11px; color: #7f8c8d; margin-top: 5px;">All time</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Today's Volume</div>
            <div class="stat-value" id="today-volume-sol">0 SOL</div>
            <div style="font-size: 11px; color: #7f8c8d; margin-top: 5px;">Last 24 hours</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Success Rate</div>
            <div class="stat-value" id="success-rate">0%</div>
            <div style="font-size: 11px; color: #7f8c8d; margin-top: 5px;">Confirmed trades</div>
          </div>
        </div>

        <!-- Today's Activity -->
        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2 style="margin: 0;">Today's Trading Activity</h2>
            <button id="refresh-trades-btn" class="btn btn-small" style="background: #3498db;">
              ğŸ”„ Refresh
            </button>
          </div>
          
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
            <div style="background: #2c3e50; padding: 15px; border-radius: 8px;">
              <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Buys Today</div>
              <div style="font-size: 20px; font-weight: bold;" id="today-buys">0</div>
              <div style="font-size: 11px; color: #27ae60;" id="today-buys-volume">0 SOL</div>
            </div>
            <div style="background: #2c3e50; padding: 15px; border-radius: 8px;">
              <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Sells Today</div>
              <div style="font-size: 20px; font-weight: bold;" id="today-sells">0</div>
              <div style="font-size: 11px; color: #e74c3c;" id="today-sells-volume">0 SOL</div>
            </div>
            <div style="background: #2c3e50; padding: 15px; border-radius: 8px;">
              <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Avg Trade Size</div>
              <div style="font-size: 20px; font-weight: bold;" id="avg-trade-size">0</div>
              <div style="font-size: 11px; color: #7f8c8d;">SOL per trade</div>
            </div>
            <div style="background: #2c3e50; padding: 15px; border-radius: 8px;">
              <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Active Strategies</div>
              <div style="font-size: 20px; font-weight: bold;" id="active-strategies-count">0</div>
              <div style="font-size: 11px; color: #7f8c8d;">Currently running</div>
            </div>
          </div>
        </div>

        <!-- Recent Trades -->
        <div class="section">
          <h2>Recent Trades</h2>
          <div id="recent-trades-list" class="activity-log">
            <div class="empty-state">Loading trades...</div>
          </div>
        </div>

        <!-- Volume by Token -->
        <div class="section">
          <h2>Volume by Token (Last 7 Days)</h2>
          <div id="volume-by-token" style="background: #2c3e50; padding: 20px; border-radius: 8px;">
            <div class="empty-state">Loading volume data...</div>
          </div>
        </div>
      </div>

      <!-- Archive Page -->
      <div id="archive-page" class="page">
        <h1>ğŸ“¦ Strategy Archive</h1>
        <p class="page-description">View archived strategies with all their data preserved. Restore them anytime or sync to cloud.</p>

        <div class="section">
          <div style="background: #34495e; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-top: 0; color: #3498db;">ğŸ“¦ About Archive</h3>
            <div style="font-size: 13px; color: #bdc3c7; line-height: 1.6;">
              <p><strong>âœ… All data preserved:</strong> Transactions, activity logs, and strategy configuration</p>
              <p><strong>ğŸ“‚ Local storage:</strong> Archived strategies are stored on your computer</p>
              <p><strong>â˜ï¸ Cloud sync:</strong> Option to sync to cloud for backup (coming soon)</p>
              <p><strong>â™»ï¸ Restore anytime:</strong> Bring strategies back to active status</p>
              <p><strong>ğŸ—‘ï¸ Permanent delete:</strong> Only deletes if you explicitly choose to</p>
            </div>
          </div>

          <div id="archive-list" class="strategies-list">
            <div class="empty-state">Loading archived strategies...</div>
          </div>
        </div>
      </div>

      <!-- Wallet Page -->
      <div id="wallet-page" class="page">
        <h1>Wallet Management</h1>
        
        <!-- Create/Import Main Wallet Section -->
        <div class="section">
          <h2>ğŸ”‘ Create or Import Main Wallet</h2>
          <p>Start by creating a new wallet or importing an existing one</p>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="wallet-generate-new-btn" class="btn btn-primary">
              âœ¨ Generate New Wallet
            </button>
            <button id="wallet-import-btn" class="btn btn-secondary">
              ğŸ“¥ Import Existing Wallet
            </button>
          </div>
          <div id="wallet-create-status" class="status-message"></div>
        </div>

        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2 style="margin: 0;">My Wallets</h2>
            <button id="refresh-wallets-btn" class="btn btn-small" style="background: #3498db;">
              ğŸ”„ Refresh Balances
            </button>
          </div>
          <div id="all-wallets-list" class="wallets-list">
            <div class="empty-state">Loading wallets...</div>
          </div>
        </div>

        <div class="section">
          <h2>Generate Additional Wallets</h2>
          <p>Create derived wallets for volume trading</p>
          <div class="form-row">
            <div class="form-group">
              <input type="number" id="derived-wallet-count" placeholder="5" min="1" max="10" value="5" />
            </div>
            <div class="form-group">
              <button id="generate-derived-btn" class="btn btn-primary">Generate Wallets</button>
            </div>
          </div>
        </div>

        <div class="section">
          <h2>ğŸ’¸ Withdraw SOL</h2>
          <div class="form-group">
            <label>From Wallet</label>
            <select id="withdraw-sol-from">
              <option value="">Select wallet...</option>
            </select>
          </div>
          <div class="form-group">
            <label>To Address</label>
            <input type="text" id="withdraw-sol-to" placeholder="Destination Solana address" />
          </div>
          <div class="form-group">
            <label>Amount (SOL)</label>
            <input type="number" id="withdraw-sol-amount" placeholder="0.1" step="0.001" min="0" />
            <small>âš ï¸ Minimum 0.001 SOL will be kept in wallet for rent</small>
          </div>
          <div class="form-actions">
            <button id="withdraw-sol-btn" class="btn btn-primary">Withdraw SOL</button>
          </div>
          <div id="withdraw-sol-status" class="status-message"></div>
        </div>

        <div class="section">
          <h2>ğŸª™ Withdraw Tokens</h2>
          <div class="form-group">
            <label>From Wallet</label>
            <select id="withdraw-token-from">
              <option value="">Select wallet...</option>
            </select>
          </div>
          <div class="form-group">
            <label>Select Token (Optional)</label>
            <select id="withdraw-token-select" disabled>
              <option value="">-- Select wallet first --</option>
            </select>
            <small style="color: #ff9f43; display: block; margin-top: 5px;">
              â±ï¸ Note: It may take 5-10 seconds to load token balances from the blockchain
            </small>
            <div id="withdraw-token-loading" style="display: none; margin-top: 8px; color: #667eea; font-size: 14px;">
              <span class="loading-spinner">ğŸ”„</span> Loading tokens in wallet...
            </div>
          </div>
          <div class="form-group">
            <label>Or Enter Token Mint</label>
            <input type="text" id="withdraw-token-mint" placeholder="Token contract address" />
          </div>
          <div class="form-group">
            <label>To Address</label>
            <input type="text" id="withdraw-token-to" placeholder="Destination Solana address" />
          </div>
          <div class="form-group">
            <label>Amount (Tokens)</label>
            <input type="number" id="withdraw-token-amount" placeholder="100" step="0.000001" min="0" />
            <small>âš ï¸ Ensure wallet has at least 0.001 SOL for gas fees</small>
          </div>
          <div class="form-actions">
            <button id="withdraw-token-btn" class="btn btn-primary">Withdraw Tokens</button>
          </div>
          <div id="withdraw-token-status" class="status-message"></div>
        </div>
      </div>

      <!-- Settings Page -->
      <!-- Monitor Page -->
      <div id="monitor-page" class="page">
        <h1>ğŸ“Š Live Monitor</h1>
        
        <!-- Summary Cards -->
        <div class="stats-grid" style="margin-bottom: 30px;">
          <div class="stat-card">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-details">
              <div class="stat-label">Active Strategies</div>
              <div class="stat-value" id="monitor-active-count">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-details">
              <div class="stat-label">Trades Today</div>
              <div class="stat-value" id="monitor-trades-today">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">âœ…</div>
            <div class="stat-details">
              <div class="stat-label">Success Rate</div>
              <div class="stat-value" id="monitor-success-rate">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-details">
              <div class="stat-label">Fees Collected</div>
              <div class="stat-value" id="monitor-fees-collected">-</div>
            </div>
          </div>
        </div>

        <!-- Live Strategy Status -->
        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2>Active Strategies</h2>
            <button id="monitor-refresh-btn" class="btn btn-small">ğŸ”„ Refresh</button>
          </div>
          <div id="monitor-strategies-list">
            <div class="empty-state">Loading strategies...</div>
          </div>
        </div>

        <!-- Recent Trades -->
        <div class="section">
          <h2>Recent Trades (Last 20)</h2>
          <div id="monitor-recent-trades">
            <div class="empty-state">Loading trades...</div>
          </div>
        </div>
      </div>

      <!-- Diagnostics Page -->
      <div id="diagnostics-page" class="page">
        <h1>ğŸ”§ System Diagnostics</h1>
        
        <!-- System Health -->
        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2>System Health</h2>
            <div>
              <button id="run-diagnostics-btn" class="btn btn-primary">â–¶ï¸ Run Full Diagnostic</button>
              <button id="export-logs-btn" class="btn btn-secondary">ğŸ“¤ Export Logs</button>
            </div>
          </div>
          
          <div id="health-status-summary" class="health-summary">
            <div class="health-indicator">
              <span class="health-icon">ğŸ”„</span>
              <span class="health-text">Click "Run Full Diagnostic" to check system health</span>
            </div>
          </div>

          <div id="health-checks-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px;">
            <!-- Health checks will be populated here -->
          </div>
        </div>

        <!-- Issues Detected -->
        <div class="section">
          <h2>Issues Detected</h2>
          <div id="issues-list">
            <div class="empty-state">No issues detected</div>
          </div>
        </div>

        <!-- Version Information -->
        <div class="section">
          <h2>Version Information</h2>
          <div class="version-info-card">
            <div class="version-row">
              <span class="version-label">Current Version:</span>
              <span class="version-value" id="diag-current-version">v3.4.3</span>
            </div>
            <div class="version-row">
              <span class="version-label">Latest Available:</span>
              <span class="version-value" id="diag-latest-version">Checking...</span>
            </div>
            <div class="version-row">
              <span class="version-label">Status:</span>
              <span class="version-value" id="diag-version-status">-</span>
            </div>
            <div style="margin-top: 15px;">
              <button id="check-updates-btn" class="btn btn-secondary">ğŸ” Check for Updates</button>
              <button id="view-changelog-btn" class="btn btn-secondary">ğŸ“œ View Changelog</button>
            </div>
          </div>
        </div>

        <!-- System Logs -->
        <div class="section">
          <h2>System Logs</h2>
          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button id="view-activity-logs-btn" class="btn btn-small">ğŸ“‹ Activity Logs</button>
            <button id="view-error-logs-btn" class="btn btn-small">âŒ Error Logs</button>
            <button id="view-performance-logs-btn" class="btn btn-small">âš¡ Performance Logs</button>
            <button id="clear-logs-btn" class="btn btn-small btn-danger">ğŸ—‘ï¸ Clear Old Logs</button>
          </div>
          <div id="diagnostic-logs-display" class="logs-container">
            <div class="empty-state">Select a log type to view</div>
          </div>
        </div>
      </div>

      <div id="settings-page" class="page">
        <h1>Settings</h1>
        
        <!-- License Section -->
        <div class="section">
          <h2>License Information</h2>
          
          <div class="license-info-card" id="license-info">
            <div class="license-tier">
              <span class="license-tier-label">Current Tier:</span>
              <span class="license-tier-value" id="license-tier">Loading...</span>
            </div>
            <div class="license-status">
              <span class="license-status-label">Status:</span>
              <span class="license-status-value" id="license-status">Active</span>
            </div>
            <div class="license-expires" id="license-expires-section" style="display: none;">
              <span class="license-expires-label">Expires:</span>
              <span class="license-expires-value" id="license-expires">N/A</span>
            </div>
            <div class="license-hwid">
              <span class="license-hwid-label">Hardware ID:</span>
              <span class="license-hwid-value" id="license-hwid">Loading...</span>
              <button class="btn-icon" id="copy-hwid-btn" title="Copy Hardware ID">ğŸ“‹</button>
            </div>
          </div>

          <!-- License Features -->
          <div class="license-features" id="license-features">
            <h3>Your Plan Features</h3>
            <div class="features-grid">
              <div class="feature-item">
                <span class="feature-icon">ğŸ“Š</span>
                <span class="feature-name">Active Strategies:</span>
                <span class="feature-value" id="feature-strategies">-</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">ğŸ’°</span>
                <span class="feature-name">Max Wallets:</span>
                <span class="feature-value" id="feature-wallets">-</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">ğŸ¯</span>
                <span class="feature-name">Strategy Types:</span>
                <span class="feature-value" id="feature-types">-</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">â˜ï¸</span>
                <span class="feature-name">Cloud Backup:</span>
                <span class="feature-value" id="feature-cloud">-</span>
              </div>
            </div>
          </div>

          <!-- Fee Information -->
          <div class="license-features" style="margin-top: 20px;">
            <h3>ğŸ’° Transaction Fees</h3>
            <div class="fee-info-card" style="background: #2a2f46; padding: 20px; border-radius: 10px; border: 1px solid #3a3f56;">
              <div style="display: grid; gap: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: #8892a6;">Fee Status:</span>
                  <span id="fee-status" style="font-weight: 600; color: #2ed573;">Active</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: #8892a6;">Fee Percentage:</span>
                  <span id="fee-percentage" style="font-weight: 600; color: #667eea;">0.5%</span>
                </div>
                <div style="border-top: 1px solid #3a3f56; padding-top: 15px; margin-top: 5px;">
                  <p style="color: #8892a6; font-size: 14px; margin: 0;">
                    ğŸ’¡ A small fee is collected on each trade to support development and maintenance of Anvil Solo.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Activate License -->
          <div class="license-activate" id="activate-section">
            <h3>Activate License</h3>
            <p class="help-text">Enter your license key to upgrade your plan or activate a new license.</p>
            <div class="form-group">
              <label>License Key</label>
              <input type="text" id="license-key-input" placeholder="XXXXX-XXXXX-XXXXX-XXXXX" class="input">
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
              <button id="activate-license-btn" class="btn btn-primary">Activate License</button>
              <button id="test-license-connection-btn" class="btn btn-secondary" style="background: #3498db;">ğŸ”Œ Test Connection</button>
              <button id="validate-license-btn" class="btn btn-secondary">Re-validate</button>
              <button id="deactivate-license-btn" class="btn btn-danger">Deactivate</button>
            </div>
            <div id="license-action-status" class="status-message"></div>
          </div>

          <!-- Upgrade Options -->
          <div class="license-upgrade">
            <h3>Upgrade Options</h3>
            <div class="plans-grid">
              <div class="plan-card">
                <div class="plan-name">Starter</div>
                <div class="plan-price">$29<span>/month</span></div>
                <ul class="plan-features">
                  <li>âœ… 1 active strategy</li>
                  <li>âœ… Basic DCA only</li>
                  <li>âœ… 5 wallets max</li>
                  <li>âŒ No cloud backup</li>
                </ul>
              </div>
              <div class="plan-card plan-popular">
                <div class="plan-badge">Most Popular</div>
                <div class="plan-name">Pro</div>
                <div class="plan-price">$99<span>/month</span></div>
                <ul class="plan-features">
                  <li>âœ… 10 active strategies</li>
                  <li>âœ… All strategy types</li>
                  <li>âœ… 10 wallets max</li>
                  <li>âœ… Cloud strategy backup</li>
                </ul>
              </div>
              <div class="plan-card">
                <div class="plan-name">Enterprise</div>
                <div class="plan-price">$299<span>/month</span></div>
                <ul class="plan-features">
                  <li>âœ… Unlimited strategies</li>
                  <li>âœ… All strategy types</li>
                  <li>âœ… Unlimited wallets</li>
                  <li>âœ… Priority support</li>
                </ul>
              </div>
              <div class="plan-card plan-lifetime">
                <div class="plan-badge">Best Value</div>
                <div class="plan-name">Lifetime</div>
                <div class="plan-price">$999<span> one-time</span></div>
                <ul class="plan-features">
                  <li>âœ… All Enterprise features</li>
                  <li>âœ… Forever</li>
                  <li>âœ… Free updates</li>
                  <li>âœ… Priority support</li>
                </ul>
              </div>
            </div>
            <p class="help-text">Contact support or visit our website to purchase a license.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script src="monitoring.js"></script>
</body>
</html>



